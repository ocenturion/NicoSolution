<!doctype html>
<html lang="es">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Perfil — DORIAN</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css"/>
    <style>
        body { background: linear-gradient(180deg,#f8fafc 0%,#eef2ff 100%); min-height:100vh; }
        .card { max-width:720px; margin:auto; border-radius:12px; box-shadow:0 8px 24px rgba(2,6,23,0.06); }
        mark { background:#fff59d; padding:.05rem .15rem; border-radius:2px; }
    </style>
</head>
<body>
  <div class="container py-4">
    <header class="d-flex align-items-center justify-content-between mb-4">
      <div class="d-flex align-items-center gap-3">
        <img src="assets/img/logo.png" alt="logo" style="height: 40px" onerror="this.style.display='none'"/>
        <h4 class="mb-0 text-danger">DORIAN</h4>
      </div>
      <div class="d-flex align-items-center gap-2">
        <span id="welcomeUser" class="small text-muted"></span>
        <a href="index.html" class="btn btn-sm btn-outline-secondary"><i class="bi bi-house-door"></i></a>
        <a href="cart.html" class="btn btn-sm btn-outline-primary position-relative">
          <i class="bi bi-cart4"></i>
          <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">1</span>
        </a>
        <a href="profile.html" class="btn btn-sm btn-outline-secondary"><i class="bi bi-person"></i></a>
        <a href="login.html" id="logoutBtn" class="btn btn-sm btn-outline-danger"><i class="bi bi-arrow-bar-right"></i></a>
      </div>
    </header>

    <main>
      <div class="card p-4">
        <h5 class="mb-3">Mi perfil</h5>

        <div id="alertContainer" aria-live="polite"></div>

        <form id="profileForm" class="row g-3">
          <div class="col-12">
            <label class="form-label">Nombre</label>
            <input id="inputName" class="form-control" type="text" required>
            <div class="invalid-feedback">Ingresá tu nombre.</div>
          </div>

          <div class="col-12">
            <label class="form-label">Email</label>
            <input id="inputEmail" class="form-control" type="email" required>
            <div class="invalid-feedback">Ingresá un email válido.</div>
          </div>

          <div class="col-12">
            <label class="form-label">Cambiar contraseña</label>
            <button type="button" id="btnChangePwd" class="btn btn-outline-secondary btn-sm ms-2" data-bs-toggle="modal" data-bs-target="#changePwdModal">
                <i class="bi bi-key"></i>
            </button>
          </div>

          <div class="col-12 d-flex justify-content-between align-items-center">
            <div>
              <button type="submit" id="btnSave" class="btn btn-primary btn-sm">Guardar</button>
            </div>
          </div>
        </form>
      </div>
    </main>
  </div>

  <!-- Modal: Cambiar contraseña -->
  <div class="modal fade" id="changePwdModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <form id="changePwdForm" class="p-3">
          <div class="modal-header">
            <h5 class="modal-title">Cambiar contraseña</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
          </div>
          <div class="modal-body">
            <div id="pwdAlert" class="mb-2"></div>
            <div class="mb-2">
              <label class="form-label">Contraseña actual</label>
              <input id="currentPwd" type="password" class="form-control" required>
              <div class="invalid-feedback">Ingresá tu contraseña actual.</div>
            </div>
            <div class="mb-2">
              <label class="form-label">Nueva contraseña</label>
              <input id="newPwd" type="password" class="form-control" required minlength="8">
              <div class="invalid-feedback">La nueva contraseña debe tener al menos 8 caracteres.</div>
            </div>
            <div class="mb-2">
              <label class="form-label">Confirmar nueva contraseña</label>
              <input id="confirmNewPwd" type="password" class="form-control" required>
              <div class="invalid-feedback">Las contraseñas no coinciden.</div>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
            <button type="submit" class="btn btn-primary">Actualizar contraseña</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="js/profile.js"></script>
</body>
</html>
